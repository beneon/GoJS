<!DOCTYPE html>
<html>
<head>
  <script src='go.js'></script>
  <script>
    function init(){
    var $ = go.GraphObject.make;
    var diagram = new go.Diagram('myDiagramDiv');
    diagram.initialContentAlignment=go.Spot.Center;
    diagram.nodeTemplate=
      $(go.Node,'Auto',
        new go.Binding('location','loc',go.Point.parse),
        $(go.Shape,'RoundedRectangle',
        {fill:'yellow',stroke:'orange',strokeWidth:2},
          new go.Binding('fill','highlight',function(v){return v?'pink':'lightblue';}),
          new go.Binding('stroke','highlight',function(v){return v?'red':'blue';}),
          new go.Binding('strokeWidth','highlight',function(v){return v?3:1;}),
          new go.Binding('stroke','bb'),
          new go.Binding('fill','bb')
        ),

        $(go.TextBlock,
          {margin:5},
          new go.Binding('text','key'))
        );
    diagram.model.nodeDataArray = [
      {key:'Alpha',bb:'red'},
      {key:'Beta'}
    ]

    function flash (){
      var model = diagram.model;
      model.startTransaction('flash');
      var data = model.nodeDataArray[0];
      model.setDataProperty(data,'highlight',!data.highlight);
      model.commitTransaction('flash');
    }

    function loop(){
      setTimeout(function(){flash();loop();},500);
    }

}
  </script>
</head>
<body onload='init()'>
  <div id='myDiagramDiv' style='background:#eee; width:500px; height:600px;'></div>
</body>
